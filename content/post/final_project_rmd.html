---
title: "Final Project: Saturated Fats and Sugars Calories in American Fast Food"
author: "AJ Mitchell"
description: This is meta description.
draft: no
image: images/post/ffdiet.jpg
tags:
- Western Style Diet
- Calories from fat
- Calories from Sugar
categories: Top Labs
---



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>My final project will investigate the caloric contributions from fast food restaurant. These data come from the 2018 TidyTuesday Dataset title <strong>Fast Food Calories</strong>. This is for the general public, and to expand on what was started in the franchise opportunity website. If you follow the link to look at where the data was used <a href="https://www.franchiseopportunities.com/blog/general-franchise-information/fast-food-calorie-comparison-charts">here</a>, you can see that they predominantly look at caloric content of each food item. This is a very zoomed out perspective, and doesn't offer much insight into the nutritional value of the fast food items. I also did not care to break down by restaurant at this level but have ideas about how to capture it.</p>
<div class="figure">
<img src="/images/post/wheresthezalad.png" alt="No Zalad Included" />
<p class="caption">No Zalad Included</p>
</div>
<p>My research focuses on understanding the impact of Western Style Diet on brain development. Specifically, I study how consuming this diet during pregnancy can impact brain development and behavioral outcomes. We have learned that the increased levels of saturated fats and the additional sugars within the WSD are strongly related to differences in brain development and behavioral outcomes of children. So, iin order to expand, I wanted to identify which foods have higher amounts of sugars and saturated fats.</p>
<div class="figure">
<img src="/images/post/fig3_mWSD.png" alt="Mitchell 2021" />
<p class="caption">Mitchell 2021</p>
</div>
<p>A stacked barchart is used to convey the information, and I felt this was best because it conveys several bits of information within one 'swoop'. It's kind of difficult to look at at first, but once you understand what the colors are, i think it becomes very intuitive. The <code>green</code> represents the average caloric contribution <em>(based on a 2000 calorie diet)</em> of the food category, and the colors represent how much sugar (<code>blue</code>), and how much saturated fat (<code>red</code>) contributes to percentage in <code>green</code>. There are other contributors that have been excluded (like protein) that account for the extra space.</p>
</div>
<div id="loading-the-fast-food-data" class="section level1">
<h1>Loading the fast food data</h1>
<p>So, we know the data came from a TidyTuesday challenge, but where did they get it from?</p>
<p>The author of this challenge used some web scraping techniques (that had to be deleted at the request of the publisher) to gather information from <a href="https://fastfoodnutrition.org/" class="uri">https://fastfoodnutrition.org/</a>.</p>
<p>You can find information about all kinds of food items like this by checking out the site. It can be super useful for making road trips healthier : )</p>
<pre class="r"><code># loading the data from github
tuesdata_FF &lt;- tidytuesdayR::tt_load(2018, week = 23)</code></pre>
<pre><code>## 
##  Downloading file 1 of 1: `fastfood_calories.csv`</code></pre>
<pre class="r"><code># renaming the data
fastfood_calories &lt;- tuesdata_FF$fastfood_calories

# viewing the data
#glimpse(fastfood_calories)

# looking at restaurants
#unique(fastfood_calories$restaurant)</code></pre>
</div>
<div id="information-for-the-general-public" class="section level1">
<h1>Information for the general public</h1>
<p>The purpose of this is to create a simple, yet informative figure that conveys the amount of saturated fats and sugars within each of the common fast food items. Nutrition and neuroscience literature has shown that the factors that impact brain function are the increased sugars and additional saturated fats.</p>
<p>Below, I have listed out the ways the metrics were calculated. These methods were based on information collected from the Seattle School Districts evaluating healthy lunch items in school children. The PDF can be found <a href="http://district.schoolnutritionandfitness.com/visaliausd/files/SB12Howtocalculatefat.pdf">here</a>.</p>
<div id="calculating-calories-from-saturated-fats" class="section level2">
<h2>calculating calories from saturated fats</h2>
<p><span class="math display">\[(saturated fat (*9) / total calories) * 100 = saturated fat contribution (percent)\]</span></p>
<p><span class="math display">\[sugar / (total_fat + total_carb + protein + (sodium/100) + (cholesterol/100) * 100) = sugar contribution (percent)\]</span></p>
<p><span class="math display">\[calories/2000)*100 = daily calories (percent)\]</span></p>
<pre class="r"><code># percent sat fat of calories
fastfood_calories &lt;- fastfood_calories %&gt;%
  mutate(perc_sat_fat_cals = ((sat_fat*9)/calories)*100) # matches website - website may be incorrect
 
  
# percent sugar to caloric intake
fastfood_calories &lt;- fastfood_calories %&gt;%
  mutate(perc_sugar_cals = (sugar/(total_fat + total_carb + protein + sugar + (sodium/100) + (cholesterol/100))*100))

# how many calories does the food item contribute to daily intake
fastfood_calories &lt;- fastfood_calories %&gt;%
  mutate(perc_daily_cals = (calories/2000)*100)

# not using because I&#39;m not sure how imformative it it
fastfood_calories &lt;- fastfood_calories %&gt;%
  mutate(satfat_sugar_ratio = perc_sat_fat_cals/perc_sugar_cals)</code></pre>
<p>According to NIH, you should limit saturated fat to less than 10% of your daily calories. So which foods contribute the most saturated fats? To see this, we have to create food categories.</p>
<p>Fast food items have been broken down into 9 categories: - salad - burger - sandwich - tendies - hot dog - taco - burrito - pizza - other</p>
<pre class="r"><code>unique(fastfood_calories$salad_cat)</code></pre>
<pre><code>## Warning: Unknown or uninitialised column: `salad_cat`.</code></pre>
<pre><code>## NULL</code></pre>
<pre class="r"><code># creating categories for grouping caloric contributions
fastfood_calories &lt;- fastfood_calories %&gt;%
  mutate(salad_cat = case_when(grepl(&quot;salad&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;salad&quot;,
                               grepl(&quot;sandwich|philly|footlong|wrap&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;sandwich&quot;,
                               grepl(&quot;burger|big mac|WHOPPER|king&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;burger&quot;,
                               grepl(&quot;tenders|nuggets|strips&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;tendies&quot;,
                               grepl(&quot;taco|chalupa|gordita&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;taco&quot;,
                               grepl(&quot;dog&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;hot dog&quot;,
                               grepl(&quot;burrito|nachos&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;burrito&quot;,
                               grepl(&quot;pizza&quot;,
                                     item,
                                     ignore.case = TRUE) ~ &quot;pizza&quot;,
                               TRUE ~ &quot;other&quot;))



# assigning factors
fastfood_calories$salad_cat &lt;- as.factor(fastfood_calories$salad_cat)
fastfood_calories$restaurant &lt;- as.factor(fastfood_calories$restaurant)


# assiging factor levels
fastfood_calories$salad_cat &lt;- factor(fastfood_calories$salad_cat,
                                      levels = c( &quot;salad&quot;,
                                                  &quot;burger&quot;,
                                                  &quot;sandwich&quot;, 
                                                  &quot;tendies&quot;,
                                                  &quot;hot dog&quot;,
                                                  &quot;taco&quot;, 
                                                  &quot;burrito&quot;,
                                                  &quot;pizza&quot;,
                                                  &quot;other&quot;))</code></pre>
</div>
</div>
<div id="manipulations-for-visualizations" class="section level1">
<h1>manipulations for visualizations</h1>
<p>Below there are several manippulations that need to be made in order to group the data properly for visualizations.</p>
<pre class="r"><code>fastfood_calories %&gt;%
  filter(salad_cat %in% c(&quot;sandwich&quot;,
                          &quot;burger&quot;,
                          &quot;salad&quot;,
                          &quot;tendies&quot;,
                          &quot;taco&quot;))</code></pre>
<pre><code>## # A tibble: 337 x 23
##       X1 restaurant item  calories cal_fat total_fat sat_fat trans_fat
##    &lt;dbl&gt; &lt;fct&gt;      &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
##  1     1 Mcdonalds  Arti~      380      60         7       2       0  
##  2     2 Mcdonalds  Sing~      840     410        45      17       1.5
##  3     3 Mcdonalds  Doub~     1130     600        67      27       3  
##  4     4 Mcdonalds  Gril~      750     280        31      10       0.5
##  5     5 Mcdonalds  Cris~      920     410        45      12       0.5
##  6     6 Mcdonalds  Big ~      540     250        28      10       1  
##  7     7 Mcdonalds  Chee~      300     100        12       5       0.5
##  8     8 Mcdonalds  Clas~      510     210        24       4       0  
##  9     9 Mcdonalds  Doub~      430     190        21      11       1  
## 10    12 Mcdonalds  Garl~      620     300        34      13       1.5
## # ... with 327 more rows, and 15 more variables: cholesterol &lt;dbl&gt;,
## #   sodium &lt;dbl&gt;, total_carb &lt;dbl&gt;, fiber &lt;dbl&gt;, sugar &lt;dbl&gt;, protein &lt;dbl&gt;,
## #   vit_a &lt;dbl&gt;, vit_c &lt;dbl&gt;, calcium &lt;dbl&gt;, salad &lt;chr&gt;,
## #   perc_sat_fat_cals &lt;dbl&gt;, perc_sugar_cals &lt;dbl&gt;, perc_daily_cals &lt;dbl&gt;,
## #   satfat_sugar_ratio &lt;dbl&gt;, salad_cat &lt;fct&gt;</code></pre>
<pre class="r"><code>summarized_ff_wchain &lt;- fastfood_calories %&gt;%
  filter(perc_sugar_cals &gt;= .01) %&gt;%
  filter(perc_sat_fat_cals &gt;= .01) %&gt;%
  group_by(salad_cat, restaurant) %&gt;%
  summarise(mean_sug = mean(perc_sugar_cals,
                            na.rm=T),
            mean_sat = mean(perc_sat_fat_cals,
                            na.rm=T),
            mean_daycals = mean(perc_daily_cals,
                                na.rm = T))</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;salad_cat&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code>summarized_ff &lt;- fastfood_calories %&gt;%
  filter(perc_sugar_cals &gt;= .01) %&gt;%
  filter(perc_sat_fat_cals &gt;= .01) %&gt;%
  group_by(salad_cat) %&gt;%
  summarise(mean_sug = mean(perc_sugar_cals,
                            na.rm=T),
            mean_sat = mean(perc_sat_fat_cals,
                            na.rm=T),
            mean_daycals = mean(perc_daily_cals,
                                na.rm = T))</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>#melting the data for visualization 
mlt_summarized_ff_wchain &lt;- reshape2::melt(summarized_ff_wchain)</code></pre>
<pre><code>## Using salad_cat, restaurant as id variables</code></pre>
<pre class="r"><code>mlt_summarized_ff &lt;- reshape2::melt(summarized_ff)</code></pre>
<pre><code>## Using salad_cat as id variables</code></pre>
<pre class="r"><code># assigning proper names for variables
mlt_summarized_ff_wchain &lt;- mlt_summarized_ff_wchain %&gt;%
  mutate(proper_name = case_when(variable == &quot;mean_sat&quot; ~ &quot;Saturated Fat&quot;,
                                 variable == &quot;mean_sug&quot; ~ &quot;Sugar&quot;,
                                 variable == &quot;mean_daycals&quot; ~ &quot;Total Daily Calories&quot;))

mlt_summarized_ff &lt;- mlt_summarized_ff %&gt;%
  mutate(proper_name = case_when(variable == &quot;mean_sat&quot; ~ &quot;Saturated Fat&quot;,
                                 variable == &quot;mean_sug&quot; ~ &quot;Sugar&quot;,
                                 variable == &quot;mean_daycals&quot; ~ &quot;Total Daily Calories&quot;))

# cumulative sum for  &lt;- did not use 
mlt_summarized_ff_wchain &lt;- mlt_summarized_ff_wchain %&gt;%
  group_by(variable) %&gt;%
  mutate(label_y = cumsum(value))

# assigning levels to factors
mlt_summarized_ff_wchain$variable &lt;- factor(mlt_summarized_ff_wchain$variable,
                                            levels = c(&quot;mean_sat&quot;,
                                                     &quot;mean_daycals&quot;,
                                                     &quot;mean_sug&quot;))

mlt_summarized_ff$variable &lt;- factor(mlt_summarized_ff$variable,
                                            levels = c(&quot;mean_sat&quot;,
                                                     &quot;mean_daycals&quot;,
                                                     &quot;mean_sug&quot;))
# assigning levels to factors
mlt_summarized_ff_wchain$proper_name &lt;- factor(mlt_summarized_ff_wchain$proper_name,
                                            levels = c(&quot;Saturated Fat&quot;,
                                                     &quot;Total Daily Calories&quot;,
                                                     &quot;Sugar&quot;))

mlt_summarized_ff$proper_name &lt;- factor(mlt_summarized_ff$proper_name,
                                            levels = c(&quot;Saturated Fat&quot;,
                                                     &quot;Total Daily Calories&quot;,
                                                     &quot;Sugar&quot;))</code></pre>
</div>
<div id="plotting-the-data" class="section level1">
<h1>Plotting the data</h1>
<p>Within the data below, I have isolated out the contributions of <strong>saturated fats</strong> and <strong>added sugars</strong> to the <strong>total (daily) caloric contribution</strong> to the food. For example, <em>tendies</em> predominately referes to chicken and includes nuggets, tenders, and strips. You'll notice that they contribute a large amount to the daily calorie count. Why is this? Is it because they come in 60 piece packages or because of large amounts of dense protein.</p>
<pre class="r"><code># plotting the data
mlt_summarized_ff_wchain %&gt;%
  filter(!salad_cat == &quot;other&quot;) %&gt;%
  ggplot(aes(x=salad_cat,
             y=value,
             fill=proper_name)) +
  geom_col(position = &quot;fill&quot;) +
  scale_fill_manual(values = c(&quot;#993333&quot;,
                               &quot;#99cc99&quot;,
                               &quot;#330099&quot;)) +
  scale_y_continuous(labels=scales::percent) +
  theme(axis.text.y = element_text(size=12,
                                 face=&quot;bold&quot;,
                                 color = &quot;black&quot;),
        axis.text.x = element_text(face=&quot;bold&quot;,
                                   size=10,
                                   color = &quot;black&quot;),
        legend.text = element_text(face=&quot;bold&quot;,
                                   size = 10),
        panel.grid.minor.x = element_blank(),
        panel.grid.major.x = element_blank(),
        axis.title = element_text(size=14,
                                  face=&quot;bold&quot;),
        title = element_text(size=14,face=&quot;bold&quot;),
        plot.background = element_rect(fill=&quot;lightskyblue3&quot;),
        legend.background = element_rect(fill = &quot;lightskyblue3&quot;),
        panel.background = element_rect(fill=&quot;grey66&quot;)) +
 # coord_flip() +
  labs(x=&quot;Fast Food Item&quot;,
       y=&quot;Caloric Percentage (2000 cal/day)&quot;,
       title=&quot;Average Caloric Contribution of American Fast Foods&quot;,
       subtitle = &quot;Insights into the Western Style Diet&quot;,
       fill=&quot;&quot;) </code></pre>
<p><img src="/post/final_project_rmd_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
